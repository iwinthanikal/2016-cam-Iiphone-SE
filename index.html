<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2016 Camera ğŸ</title>

<style>
:root {
  --bg: #f5f5f7;
  --card: #ffffff;
  --text: #1d1d1f;
  --btn: #007aff;
}

body.dark {
  --bg: #000000;
  --card: #1c1c1e;
  --text: #ffffff;
  --btn: #0a84ff;
}

body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", sans-serif;
  display: flex;
  justify-content: center;
}

.app {
  max-width: 390px;
  width: 100%;
  padding: 16px;
}

.card {
  background: var(--card);
  border-radius: 20px;
  padding: 16px;
  box-shadow: 0 12px 30px rgba(0,0,0,.15);
}

h1 {
  text-align: center;
  font-size: 20px;
}

canvas {
  width: 100%;
  border-radius: 14px;
  background: #333;
  margin-top: 10px;
}

.controls {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 14px;
}

button, select {
  padding: 12px;
  border-radius: 14px;
  border: none;
  background: var(--btn);
  color: white;
  font-size: 14px;
}

.toggle {
  background: none;
  color: var(--text);
  border: 1px solid #888;
}
</style>
</head>

<body>
<div class="app">
  <div class="card">
    <h1>ğŸ“¸ 2016 Camera</h1>

    <canvas id="canvas"></canvas>

    <div class="controls">
      <button onclick="openCamera()">ğŸ Take Photo</button>
      <input type="file" accept="image/*" id="upload">

      <select id="preset">
        <option value="a4">VSCO A4</option>
        <option value="f2">VSCO F2</option>
        <option value="c1">VSCO C1</option>
        <option value="la">LA Vibes ğŸŒ´</option>
        <option value="party">Party Flash ğŸ‰</option>
        <option value="sunset">Sunset ğŸŒ…</option>
      </select>

      <button onclick="apply2016()">âœ¨ Apply Look</button>
      <button onclick="save()">ğŸ“² Save</button>
      <button class="toggle" onclick="toggleTheme()">ğŸŒ— Light / Dark</button>
    </div>
  </div>
</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const upload = document.getElementById("upload");
const preset = document.getElementById("preset");

let img = new Image();

// upload
upload.onchange = e => {
  const r = new FileReader();
  r.onload = () => img.src = r.result;
  r.readAsDataURL(e.target.files[0]);
};

img.onload = () => {
  canvas.width = img.width;
  canvas.height = img.height;
  ctx.drawImage(img,0,0);
};

// camera
function openCamera() {
  navigator.mediaDevices.getUserMedia({video:true}).then(stream=>{
    const v=document.createElement("video");
    v.srcObject=stream;
    v.play();
    setTimeout(()=>{
      canvas.width=v.videoWidth;
      canvas.height=v.videoHeight;
      ctx.drawImage(v,0,0);
      stream.getTracks().forEach(t=>t.stop());
    },800);
  });
}

// main filter
function apply2016() {
  ctx.filter="none";
  ctx.drawImage(img||canvas,0,0);

  if(preset.value==="a4") baseFade(0.15,0.12);
  if(preset.value==="f2") warmSunset();
  if(preset.value==="c1") coolLA();
  if(preset.value==="la") coolLA(true);
  if(preset.value==="party") partyFlash();
  if(preset.value==="sunset") warmSunset(true);

  instagram2016Compression();
}

// helpers
function baseFade(sat,con){
  ctx.filter=`saturate(${1-sat}) contrast(${1-con}) brightness(1.02)`;
  ctx.drawImage(canvas,0,0);
  liftBlacks();
}

function liftBlacks(){
  const d=ctx.getImageData(0,0,canvas.width,canvas.height);
  for(let i=0;i<d.data.length;i+=4){
    d.data[i]+=12; d.data[i+1]+=12; d.data[i+2]+=12;
  }
  ctx.putImageData(d,0,0);
}

function warmSunset(extra=false){
  baseFade(0.1,0.08);
  const d=ctx.getImageData(0,0,canvas.width,canvas.height);
  for(let i=0;i<d.data.length;i+=4){
    d.data[i]+=extra?12:6;
    d.data[i+1]+=4;
  }
  ctx.putImageData(d,0,0);
}

function coolLA(extra=false){
  baseFade(0.12,0.1);
  const d=ctx.getImageData(0,0,canvas.width,canvas.height);
  for(let i=0;i<d.data.length;i+=4){
    d.data[i+2]+=extra?12:6;
  }
  ctx.putImageData(d,0,0);
}

function partyFlash(){
  ctx.filter="contrast(1.1) brightness(1.08)";
  ctx.drawImage(canvas,0,0);
}

// instagram 2016 export feel
function instagram2016Compression(){
  const imgData=ctx.getImageData(0,0,canvas.width,canvas.height);
  ctx.putImageData(imgData,0,0);
}

// save
function save(){
  const a=document.createElement("a");
  a.download="2016-photo.jpg";
  a.href=canvas.toDataURL("image/jpeg",0.88);
  a.click();
}

// theme
function toggleTheme(){
  document.body.classList.toggle("dark");
}
</script>
</body>
</html>
